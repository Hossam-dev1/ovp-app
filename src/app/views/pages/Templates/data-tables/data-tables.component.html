<!-- <kt-notice [icon]="'flaticon-warning kt-font-warning'" style="direction: ltr;text-align: left;">
	&nbsp; &nbsp; DataTables created By <code>Al3ameed</code>.
</kt-notice> -->
<div class="row">
	<div class="col-12">
		<kt-portlet-header [title]="title"> </kt-portlet-header>
		<div class="example-container px-3 py-1">
			<div class="example-loading-shade text-center d-flex justify-content-center p-5" *ngIf="isLoading">
				<mat-spinner diameter="50" *ngIf="isLoading"></mat-spinner>
			</div>
			<div class="example-table-container" *ngIf="!isLoading">
				<!--Search Filter-->
				<kt-filter [AddBtnParam]="path_param" [currentService]="dynamicServiceName" [headerParams]="headerParams" [currentComponent]="this"
					[HasActive]="true" [HasExport]="true" [HasSearchFilter]="true" [isLoadingResults]="isLoading"
					[HasItemPerPage]="true" [HasAdd]='true'>
				</kt-filter>
				<!-- <form>
					<mat-form-field class="w-25 pr-3 pl-3 py-4">
						<input matInput type="text" name="filter_Name"
							(keyup)="applySpecificFilter('name' ,$event.target.value)" placeholder="Filter Name.">
					</mat-form-field>
				</form> -->
				<!--Table-->
				<table mat-table [dataSource]="dataSource$" matSort class="mat-elevation-z8">
					<!-- Position Column -->
					<ng-container *ngFor="let header of tableHeaders;">
						<!-- id column -->
						<ng-container matColumnDef="{{header}}" *ngIf="header == 'id'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> No. </th>
							<td mat-cell *matCellDef="let element"> {{element.id}} </td>
						</ng-container>

						<!-- key column -->
						<ng-container matColumnDef="{{header}}"
							*ngIf="header == 'key' || header == 'email' || header == 'series_no_of_seasons' || header== 'no_of_episodes'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let element"> {{element[header] }} </td>
						</ng-container>

						<!-- name column -->
						<ng-container matColumnDef="{{header}}" *ngIf="header == 'name'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let elem">
								{{ toLang(elem[header]) }}
							</td>
						</ng-container>

						<!-- nationality column -->
						<ng-container matColumnDef="{{header}}" *ngIf="header == 'nationality'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let elem">
								{{ toLang(elem[header]['name']) }}
							</td>
						</ng-container>

						<!-- genres column -->
						<ng-container matColumnDef="{{header}}" *ngIf="header == 'genres'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let elem">
								{{ elem[header][0]['key'] }}
							</td>
						</ng-container>

						<!-- Series Name column -->
						<ng-container matColumnDef="{{header}}" *ngIf="header == 'series_name'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let elem">
								{{toLang( elem['series']['name']) }}
							</td>
						</ng-container>

						<!-- status column -->
						<ng-container matColumnDef="{{header}}" *ngIf="header == 'series_status' || header == 'status'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let elem">
								<i [class]="elem[header] ? 'flaticon2-check-mark': 'flaticon2-cancel-music'"></i>
							</td>
						</ng-container>

						<!-- types column -->
						<ng-container matColumnDef="{{header}}" *ngIf="header == 'types' || header == 'company_types'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let elem">
								{{ elem[header][0].key }}
							</td>
						</ng-container>

						<!-- thumb column -->
						<ng-container matColumnDef="{{header}}"
							*ngIf="header == 'thumb'||header == 'logo'||header == 'image'">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{header}} </th>
							<td mat-cell *matCellDef="let element">
								<img class="img-thumbnail" src="../../../../../assets/img/Dummy-Person.png" alt="">
							</td>
						</ng-container>

						<!-- action Column -->
						<ng-container *ngIf="header == 'options'" matColumnDef="options">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{ 'Components.options' | translate}}
							</th>
							<td mat-cell *matCellDef="let element">
								<button [matMenuTriggerFor]="menu"
									class="btn btn-outline-hover-dark btn-outline-secondary btn-circle">
									<i class="flaticon-settings"></i>
								</button>
								<mat-menu #menu="matMenu">
									<button mat-raised-button *ngIf="title == 'Series'" mat-menu-item [queryParams]="{series:element.id}"
										[routerLink]="'/cms/seasons'">
										Seasons
									</button>
									<button mat-raised-button *ngIf="title == 'Seasons'" mat-menu-item
										[queryParams]="{series:path_param['series'], seasons:element.id}" [routerLink]="'/cms/episodes'">
										Episodes
									</button>
									<button mat-raised-button
										*ngIf="title == 'Crew'|| title == 'Content Providers'|| title == 'Company' || title == 'Series' || title == 'Seasons' || title == 'Episodes'"
										mat-menu-item [routerLink]="'details/'+ element.id">
										{{ 'Components.Details' | translate }}
									</button>
									<button mat-raised-button [queryParams]="
											(title == 'Seasons' ?  {series:path_param['series']} : null) ||
											(title == 'Episodes' ?  {series:path_param['series'], seasons:path_param['seasons']} : null)"
										mat-menu-item [routerLink]="'edit/'+ element.id">
										{{ 'Components.Edit' | translate }}
									</button>
									<button  mat-raised-button mat-menu-item [routerLink]="element.id"
										(click)="deleteColumn(element.id, element)">
										{{ 'Components.Delete' | translate }}
									</button>
								</mat-menu>
							</td>
						</ng-container>

					</ng-container>

					<tr mat-header-row *matHeaderRowDef="tableHeaders"></tr>
					<tr mat-row *matRowDef="let row; columns: tableHeaders;"></tr>
					<!-- <tr mat-footer-row *matFooterRowDef="tableHeaders"></tr> -->
				</table>
				<!--Table-->
			</div>
			<!-- <mat-paginator #paginator
				[length]="resultsLength"
				[pageIndex]="pageIndex"
				[pageSize]="pageSize"
				(page)="getServerData($event)"
			></mat-paginator> -->
			<mat-paginator #paginator [pageSizeOptions]="[4, 10, 20]" showFirstLastButtons></mat-paginator>
		</div>
	</div>
</div>
